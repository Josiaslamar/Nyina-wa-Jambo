<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pharmacy Management System Documentation</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f8f9fa; margin: 0; padding: 0; }
    .container { max-width: 900px; margin: 40px auto; background: #fff; padding: 32px 40px; border-radius: 12px; box-shadow: 0 2px 16px rgba(0,0,0,0.08); }
    h1, h2, h3 { color: #2c3e50; }
    h1 { margin-bottom: 0.5em; }
    h2 { margin-top: 2em; }
    ul, ol { margin-left: 1.5em; }
    .feature-list { background: #eaf6ff; border-radius: 8px; padding: 16px; margin-bottom: 24px; }
    .highlight { color: #0077b6; font-weight: bold; }
    code, pre { background: #f4f4f4; border-radius: 4px; padding: 2px 6px; }
    .table-section { margin-bottom: 2em; }
    .table-section h3 { margin-bottom: 0.2em; }
    .footer { margin-top: 40px; text-align: center; color: #888; font-size: 0.95em; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Pharmacy Management System Documentation</h1>
    <p>This system manages pharmacy operations including medicines, suppliers, users, customers, orders, and stock movements. Built for Supabase/PostgreSQL backend.</p>

    <h2>System Features</h2>
    <div class="feature-list">
      <ul>
        <li><span class="highlight">Medicines Management:</span> Add, update, and track medicines, stock, expiry, and supplier details.</li>
        <li><span class="highlight">Supplier Management:</span> Manage supplier info and link medicines to suppliers.</li>
        <li><span class="highlight">User Authentication & Roles:</span> Secure login, roles (admin, receptionist, customer), and activity tracking.</li>
        <li><span class="highlight">Customer Management:</span> Store customer details, link to user accounts, and assign unique IDs.</li>
        <li><span class="highlight">Order Processing:</span> Create/manage orders, track status, calculate totals, and link to customers/medicines.</li>
        <li><span class="highlight">Stock Movements:</span> Log all stock changes (purchase, sale, expired, damaged, adjustment).</li>
        <li><span class="highlight">Security & Policies:</span> Row Level Security (RLS) enabled, customizable access policies.</li>
        <li><span class="highlight">Performance Optimization:</span> Indexes on key columns for fast queries.</li>
        <li><span class="highlight">Sample Data:</span> Preloaded users, medicines, suppliers, customers, orders, and stock movements.</li>
      </ul>
    </div>

    <h2>Database Tables</h2>
    <div class="table-section">
      <h3>Medicines</h3>
      <ul>
        <li>Tracks all medicine details and stock.</li>
        <li>Fields: id, name, category, price, stock, supplier, sale_on, description, expiry_date, batch_number, created_at, updated_at</li>
      </ul>
    </div>
    <div class="table-section">
      <h3>Suppliers</h3>
      <ul>
        <li>Stores supplier information.</li>
        <li>Fields: id, name, contact_person, phone, email, address, city, country, created_at, updated_at</li>
      </ul>
    </div>
    <div class="table-section">
      <h3>Users</h3>
      <ul>
        <li>Manages authentication and roles.</li>
        <li>Fields: id, username, email, password_hash, full_name, role, is_active, phone, address, last_login, created_at, updated_at</li>
      </ul>
    </div>
    <div class="table-section">
      <h3>Customers</h3>
      <ul>
        <li>Links to users, stores customer info.</li>
        <li>Fields: id, user_id, customer_id, name, phone, email, address, notes, last_visit, created_at, updated_at</li>
      </ul>
    </div>
    <div class="table-section">
      <h3>Orders</h3>
      <ul>
        <li>Records medicine orders, links to customers and medicines.</li>
        <li>Fields: id, customer_name, customer_id, medicine_name, medicine_id, quantity, unit_price, total, status, order_date, created_by, created_at, updated_at</li>
      </ul>
    </div>
    <div class="table-section">
      <h3>Stock Movements</h3>
      <ul>
        <li>Logs all changes in medicine stock.</li>
        <li>Fields: id, medicine_id, medicine_name, movement_type, quantity, previous_stock, new_stock, reason, reference_id, notes, movement_date, created_at, updated_at</li>
      </ul>
    </div>

    <h2>Security</h2>
    <ul>
      <li>Row Level Security (RLS) enabled for all tables.</li>
      <li>Policies currently allow all operations; should be customized for production.</li>
    </ul>

    <h2>How to Use</h2>
    <ol>
      <li>Run the provided SQL script in Supabase SQL Editor to create tables and insert sample data.</li>
      <li>Use the users table for login and role management.</li>
      <li>Manage medicines, suppliers, customers, orders, and stock via the respective tables.</li>
      <li>Integrate with Supabase.js for real-time data operations.</li>
    </ol>

    <h2>Extensibility</h2>
    <ul>
      <li>Add more roles or permissions by updating the users table and RLS policies.</li>
      <li>Integrate with Supabase Auth for secure authentication.</li>
      <li>Expand with additional features like reporting, analytics, or notifications.</li>
    </ul>

    <h2>Highlighted Features</h2>
    <ul>
      <li>Role-based access control</li>
      <li>Full audit trail of stock movements</li>
      <li>Secure and scalable database design</li>
      <li>Ready for integration with modern web frontends (HTML/JS/Supabase.js)</li>
      <li>Sample data for quick testing and demonstration</li>
    </ul>

    <h2>Next Steps</h2>
    <ol>
      <li>Customize RLS policies for production security.</li>
      <li>Build frontend pages for each module (medicines, suppliers, orders, etc.).</li>
      <li>Integrate Supabase.js for real-time data operations.</li>
    </ol>

    <div class="footer">
      &copy; 2025 Nyina-wa-Jambo Pharmacy Management System Documentation
    </div>
  </div>
</body>
</html>
